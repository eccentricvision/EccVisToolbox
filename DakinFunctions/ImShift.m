% ImShift% res=ImShift(im,npixels,dir)% npixels to shift, dir is angle to shift (in radians)% Steven Dakin 2010% modified J Greenwood 2014function res=ImShift(im,npixels,dir)	switch nargin		case 0, error('ImShift requires an image  as arguments');		case 1, npixels=1; dir=0;		case 2,            dir=0;	end;im = single(im); %convert to single[m,n]=size(im);% [X,Y]=meshgrid([1:n],[1:m]);% res = interp2(X,Y,im,1+mod(X+npixels.*cos(dir)-1,n),1+mod(Y+npixels.*sin(dir)-1,m),'linear',0) ;% res(isnan(res))=1000;shiftSize=npixels;shiftDir=dir;   % convert to radiansimSize=size(im);[X Y]= meshgrid([1:n], [1:m]);res=interp2(im, 1+mod( X-1+shiftSize.*cos(shiftDir),imSize(2)-1), 1+mod( Y-1+shiftSize.*sin(shiftDir),imSize(1)-1),'*linear' );