function res=RMSNorm(im,target_sd)[m n,nchannels]=size(im);if ~exist('target_sd')	target_sd=ones(nchannels,1);endif (length(target_sd)~=nchannels)    target_sd=target_sd(1)+zeros(nchannels,1);endfor i=1:nchannels    t=im(:,:,i);    m1(i)=mean(t(:));    t=t-m1(i);    sd1(i)=std(t(:));    if (sd1(i)==0)        res(:,:,i)=t;    else        res(:,:,i)=(target_sd(i)/sd1(i)).*t;   endend